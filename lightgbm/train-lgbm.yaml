kind: job
metadata:
  name: classifier-job
  tag: ''
  hash: 2b58d8429c60be12290a6152d38b3e94e7d62ae6
  project: ''
spec:
  description: ''
  build:
    functionSourceCode: IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlciBvbiAyMDIwLTAxLTIyIDE3OjQ2CgppbXBvcnQgbWxydW4KbWxydW4ubWxjb25mLmRicGF0aCA9ICdodHRwOi8vbWxydW4tYXBpOjgwODAnCgpmcm9tIGlvIGltcG9ydCBCeXRlc0lPCmltcG9ydCBvcwppbXBvcnQganNvbgpmcm9tIGNsb3VkcGlja2xlIGltcG9ydCBsb2FkLCBkdW1wCmltcG9ydCBpbXBvcnRsaWIKZnJvbSB1cmxsaWIucmVxdWVzdCBpbXBvcnQgdXJscmV0cmlldmUKZnJvbSB0eXBpbmcgaW1wb3J0IElPLCBBbnlTdHIsIFR5cGVWYXIsIFVuaW9uLCBPcHRpb25hbAoKaW1wb3J0IHBhbmRhcyBhcyBwZAppbXBvcnQgbnVtcHkgYXMgbnAKaW1wb3J0IGxpZ2h0Z2JtIGFzIGxnYgpmcm9tIHNrbGVhcm4ubW9kZWxfc2VsZWN0aW9uIGltcG9ydCB0cmFpbl90ZXN0X3NwbGl0Cgpmcm9tIG1scnVuLmV4ZWN1dGlvbiBpbXBvcnQgTUxDbGllbnRDdHgKZnJvbSBtbHJ1bi5kYXRhc3RvcmUgaW1wb3J0IERhdGFJdGVtCgpkZWYgbG9nX2xnYm1fbW9kZWwoCiAgICBjb250ZXh0OiBNTENsaWVudEN0eCwKICAgIG1vZGVsLAogICAgZGF0YSwKICAgIGhlYWRlcjogbGlzdCA9IFtdLAogICAgdGFyZ2V0X3BhdGg6IHN0ciA9ICcnLAogICAgbmFtZTogc3RyID0gJycsICAjIHdpdGggZmlsZSBleHRlbnNpb24KICAgIGtleTogc3RyID0gJ21vZGVsJwopOgogICAgIiIibG9nIGEgY2xhc3NpZmllciBtb2RlbCB0byB0aGUgYXJ0aWZhY3Qgc3RvcmUKICAgIAogICAgOnBhcmFtIGNvbnRleHQ6ICAgICAgIGZ1bmN0aW9uIGNvbnRleHQKICAgIDpwYXJhbSBtb2RlbDogICAgICAgICBlc3RpbWF0ZWQgbW9kZWwKICAgIDpwYXJhbSBoaXN0b3J5OiAgICAgICB0cmFpbmluZy12YWxpZGF0aW9uIG1ldHJpY3MKICAgIDpwYXJhbSB0ZXN0X2RhdGE6ICAgICB0ZXN0IGxhYmVscyBhbmQgdGVzdCBwcmVkaWN0aW9ucwogICAgOnBhcmFtIGhlYWRlcjogICAgICAgIGZlYXR1cmVzIGxhYmVscwogICAgOnBhcmFtIHRhcmdldF9wYXRoOiAgIGRlc3RpbnRpb24gZm9sZGVyIGZvciBmaWxlIGFydGlmYWN0cwogICAgOnBhcmFtIG5hbWU6ICAgICAgICAgIG5hbWUgb2YgbW9kZWwgZmlsZSAob3IsIHByZWZpeCB0byBtb2RlbCBmaWxlcykKICAgIDpwYXJhbSBrZXk6ICAgICAgICAgICBrZXkgb2YgbW9kZWwgaW4gYXJ0aWZhY3Qgc3RvcmUKICAgIDpwYXJhbSBsYWJlbHM6ICAgICAgICBtb2RlbCBhcnRpZmFjdCBsYWJlbHMKICAgIAogICAgU2F2ZSBhbiBlc3RpbWF0ZWQgbW9kZWwgYWxvbmcgd2l0aCBtZXRhZGF0YSwgaXQncyB0cmFpbmluZy12YWxpZGF0aW9uIG1ldHJpY3MgCiAgICBoaXN0b3J5IGFuZCBwbG90cywgcm9jIGN1cnZlLCBjb25mdXNpb24gbWF0cml4IGFuZCBmZWF0dXJlIGltcG9ydGFuY2VzLiAgCiAgICAiIiIKICAgIGltcG9ydCBvcwogICAgaW1wb3J0IG51bXB5IGFzIG5wCiAgICBpbXBvcnQgcGFuZGFzIGFzIHBkCiAgICBpbXBvcnQgbGlnaHRnYm0gYXMgbGdiCiAgICBmcm9tIGNsb3VkcGlja2xlIGltcG9ydCBkdW1wCiAgICBmcm9tIHNrbGVhcm4ubWV0cmljcyBpbXBvcnQgKHJvY19jdXJ2ZSwgY29uZnVzaW9uX21hdHJpeCkKICAgIGltcG9ydCBtYXRwbG90bGliLnB5cGxvdCBhcyBwbHQKICAgIGZyb20gbWF0cGxvdGxpYi5maWd1cmUgaW1wb3J0IEZpZ3VyZQogICAgaW1wb3J0IHNlYWJvcm4gYXMgc25zCiAgICBmcm9tIG1scnVuLmFydGlmYWN0cyBpbXBvcnQgVGFibGVBcnRpZmFjdCwgUGxvdEFydGlmYWN0CiAgICBmcm9tIG1scnVuLmV4ZWN1dGlvbiBpbXBvcnQgTUxDbGllbnRDdHgKICAgIAogICAgZGVmIF9nY2ZfY2xlYXIocGx0KToKICAgICAgICBwbHQuY2xhKCkKICAgICAgICBwbHQuY2xmKCkKICAgICAgICBwbHQuY2xvc2UoKSAgICAgICAgCiAgICAKICAgIGRlZiBfcGxvdF92YWxpZGF0aW9uKHRyYWluX21ldHJpYywgdmFsaWRfbWV0cmljKToKICAgICAgICAiIiJQbG90IHRyYWluIGFuZCB2YWxpZGF0aW9uIGxvc3MgY3VydmVzIGZyb20gYSBtZXRyaWNzIHRhYmxlIGluIGFuCiAgICAgICAgYXJ0aWZhY3Qgc3RvcmUuCgogICAgICAgIFRoZXNlIGN1cnZlcyByZXByZXNlbnQgdGhlIHRyYWluaW5nIHJvdW5kIGxvc3NlcyBmcm9tIHRoZSB0cmFpbmluZwogICAgICAgIGFuZCB2YWxpZGF0aW9uIHNldHMuCiAgICAgICAgOnBhcmFtIHRyYWluX21ldHJpYzogICAgdHJhaW4gbWV0cmljCiAgICAgICAgOnBhcmFtIHZhbGlkX21ldHJpYzogICAgdmFsaWRhdGlvbiBtZXRyaWMKICAgICAgICAiIiIKICAgICAgICBwbHQucGxvdCh0cmFpbl9tZXRyaWMpCiAgICAgICAgcGx0LnBsb3QodmFsaWRfbWV0cmljKQogICAgICAgIHBsdC50aXRsZSgidHJhaW5pbmcgdmFsaWRhdGlvbiByZXN1bHRzIikKICAgICAgICBwbHQueGxhYmVsKCJlcG9jaCIpCiAgICAgICAgcGx0LnlsYWJlbCgiIikKICAgICAgICBwbHQubGVnZW5kKFsidHJhaW4iLCAidmFsaWQiXSkKICAgICAgICBmaWcgPSBwbHQuZ2NmKCkKCiAgICAgICAgcGxvdHBhdGggPSBvcy5wYXRoLmpvaW4odGFyZ2V0X3BhdGgsICJoaXN0b3J5LnBuZyIpCiAgICAgICAgcGx0LnNhdmVmaWcocGxvdHBhdGgpCiAgICAgICAgY29udGV4dC5sb2dfYXJ0aWZhY3QoUGxvdEFydGlmYWN0KCd0cmFpbmluZy12YWxpZGF0aW9uLXBsb3QnLCBib2R5PWZpZywgdGFyZ2V0X3BhdGg9cGxvdHBhdGgpKQoKICAgICAgICBfZ2NmX2NsZWFyKHBsdCkKCiAgICBkZWYgX3Bsb3Rfcm9jKHlfbGFiZWxzLCB5X3Byb2JzKToKICAgICAgICAiIiJQbG90IGFuIFJPQyBjdXJ2ZSBmcm9tIHRlc3QgZGF0YSBzYXZlZCBpbiBhbiBhcnRpZmFjdCBzdG9yZS4KICAgICAgICA6cGFyYW0geV9sYWJlbHM6ICAgICAgICB0ZXN0IGRhdGEgbGFiZWxzCiAgICAgICAgOnBhcmFtIHlfcHJvYnM6ICAgICAgICAgdGVzdCBkYXRhIAogICAgICAgICIiIgogICAgICAgIGZwcl94ZywgdHByX3hnLCBfID0gcm9jX2N1cnZlKHlfbGFiZWxzLCB5X3Byb2JzKQogICAgICAgIHBsdC5wbG90KFswLCAxXSwgWzAsIDFdLCAiay0tIikKICAgICAgICBwbHQucGxvdChmcHJfeGcsIHRwcl94ZywgbGFiZWw9InJvYyIpCiAgICAgICAgcGx0LnhsYWJlbCgiZmFsc2UgcG9zaXRpdmUgcmF0ZSIpCiAgICAgICAgcGx0LnlsYWJlbCgidHJ1ZSBwb3NpdGl2ZSByYXRlIikKICAgICAgICBwbHQudGl0bGUoInJvYyBjdXJ2ZSIpCiAgICAgICAgcGx0LmxlZ2VuZChsb2M9ImJlc3QiKQogICAgICAgIGZpZyA9IHBsdC5nY2YoKQoKICAgICAgICBwbG90cGF0aCA9IG9zLnBhdGguam9pbih0YXJnZXRfcGF0aCwgInJvYy5wbmciKQogICAgICAgIGZpZy5zYXZlZmlnKHBsb3RwYXRoLCBmb3JtYXQ9InBuZyIpCiAgICAgICAgY29udGV4dC5sb2dfYXJ0aWZhY3QoUGxvdEFydGlmYWN0KCdyb2MnLCBib2R5PWZpZykpCgogICAgICAgIF9nY2ZfY2xlYXIocGx0KQoKICAgIGRlZiBfcGxvdF9jb25mdXNpb25fbWF0cml4KGxhYmVscywgcHJlZGljdGlvbnMsIGF4aXNsYWJlbHM9Tm9uZSk6CiAgICAgICAgIiIiQ3JlYXRlIGEgY29uZnVzaW9uIG1hdHJpeC4KICAgICAgICBQbG90IGFuZCBzYXZlIGEgY29uZnVzaW9uIG1hdHJpeCB1c2luZyB0ZXN0X2RhdGEgZnJvbSBhCiAgICAgICAgcGlwZWxpbmUgc3RlcC4gIFRoZSBwbG90IGlzIGdlbmVyYXRlZCB1c3VuZyBkZWZhdWx0IGFyZ3VtZW50cy4KICAgICAgICBUaGUgcHJlc2VudCBleGFtcGxlIGNvdWxkIGJlIGV4dGVuZGVkIGJ5IGluY2x1ZGluZyBhIHBhcmFtZXRlcnMgYGRpY3RgCiAgICAgICAgdGhhdCBpcyBwYXNzZWQgdGhyb3VnaCB0byBza2xlYXJuJ3MgYGNvbmZ1c2lvbl9tYXRyaXhgLAogICAgICAgIGBDb25mdXNpb25NYXRyaXhEaXNwbGF5YCwgYW5kIG1hdHBsb3RsaWIgYHBsb3RgLgogICAgICAgIDpwYXJhbSBsYWJlbHM6ICAgICAgICAgIHRlc3QgZGF0YSBsYWJlbHMKICAgICAgICA6cGFyYW0gcHJlZGljdGlvbnM6ICAgICB0ZXN0IGRhdGEgcHJlZGljdGlvbnMKICAgICAgICAiIiIKICAgICAgICBjbSA9IGNvbmZ1c2lvbl9tYXRyaXgobGFiZWxzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVkaWN0aW9ucywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FtcGxlX3dlaWdodD1Ob25lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbHM9YXhpc2xhYmVscywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplPSdhbGwnKQogICAgICAgIHNucy5oZWF0bWFwKGNtLCBhbm5vdD1UcnVlLCBjbWFwPSJCbHVlcyIpCiAgICAgICAgcGxvdHBhdGggPSBvcy5wYXRoLmpvaW4odGFyZ2V0X3BhdGgsICJjb25mdXNpb24ucG5nIikKICAgICAgICBmaWcgPSBwbHQuZ2NmKCkKICAgICAgICBmaWcuc2F2ZWZpZyhwbG90cGF0aCkKICAgICAgICBjb250ZXh0LmxvZ19hcnRpZmFjdChQbG90QXJ0aWZhY3QoJ2NvbmZ1c2lvbl9tYXRyaXgnLCBib2R5PWZpZykpCgogICAgICAgIF9nY2ZfY2xlYXIocGx0KQoKICAgIGRlZiBfcGxvdF9pbXBvcnRhbmNlKG1vZGVsLCBoZWFkZXI6IGxpc3QgPSBbXSk6CiAgICAgICAgIiIiRGlzcGxheSBlc3RpbWF0ZWQgZmVhdHVyZSBpbXBvcnRhbmNlcy4KCiAgICAgICAgOnBhcmFtIG1vZGVsOiAgICAgICBmaXR0ZWQgbGlnaHRnYm0gbW9kZWwKICAgICAgICA6cGFyYW0gaGVhZGVyOiAgICAgIGxpc3Qgb2YgZmVhdHVyZSBuYW1lcwogICAgICAgICIiIgogICAgICAgIHppcHBlZCA9IHppcChtb2RlbC5mZWF0dXJlX2ltcG9ydGFuY2VzXywgaGVhZGVyKQoKICAgICAgICBmZWF0dXJlX2ltcCA9IHBkLkRhdGFGcmFtZShzb3J0ZWQoemlwcGVkKSwgY29sdW1ucz1bJ2ZyZXEnLCdmZWF0dXJlJ10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkuc29ydF92YWx1ZXMoYnk9ImZyZXEiLCBhc2NlbmRpbmc9RmFsc2UpCgogICAgICAgIHBsdC5maWd1cmUoZmlnc2l6ZT0oMjAsIDEwKSkKICAgICAgICBzbnMuYmFycGxvdCh4PSJmcmVxIiwgeT0iZmVhdHVyZSIsIGRhdGE9ZmVhdHVyZV9pbXApCiAgICAgICAgcGx0LnRpdGxlKCdMaWdodEdCTSBGZWF0dXJlcycpCiAgICAgICAgcGx0LnRpZ2h0X2xheW91dCgpCiAgICAgICAgZmlnID0gcGx0LmdjZigpCiAgICAgICAgcGxvdHBhdGggPSBvcy5wYXRoLmpvaW4odGFyZ2V0X3BhdGgsICJmZWF0dXJlLWltcG9ydGFuY2VzLnBuZyIpCiAgICAgICAgZmlnLnNhdmVmaWcocGxvdHBhdGgpCiAgICAgICAgY29udGV4dC5sb2dfYXJ0aWZhY3QoUGxvdEFydGlmYWN0KCdmZWF0dXJlLWltcG9ydGFuY2VzLXBsb3QnLCBib2R5PWZpZykpCgogICAgICAgIHRhYmxlcGF0aCA9IG9zLnBhdGguam9pbih0YXJnZXRfcGF0aCwgImZlYXR1cmUtaW1wb3J0YW5jZXMtdGFibGUuY3N2IikKICAgICAgICBmZWF0dXJlX2ltcC50b19jc3YodGFibGVwYXRoKQogICAgICAgIGNvbnRleHQubG9nX2FydGlmYWN0KFRhYmxlQXJ0aWZhY3QoJ2ZlYXR1cmUtaW1wb3J0YW5jZXMtdGFibGUnLCB0YXJnZXRfcGF0aD10YWJsZXBhdGgpKQoKICAgICAgICBfZ2NmX2NsZWFyKHBsdCkKCiAgICBpZiBjYWxsYWJsZShnZXRhdHRyKG1vZGVsLCAncHJlZGljdF9wcm9iYScpKToKICAgICAgICB5cHJlZF9wcm9icyA9IG1vZGVsLnByZWRpY3RfcHJvYmEoZGF0YVsneHRlc3QnXSlbOiwgMV0KICAgICAgICB5cHJlZCA9IG5wLndoZXJlKHlwcmVkX3Byb2JzID49IDAuNSwgMSwgMCkKICAgIGVsc2U6CiAgICAgICAgeXByZWQgPSBtb2RlbC5wcmVkaWN0KGRhdGFbJ3h0ZXN0J10pCiAgICAgICAgeXByZWRfcHJvYnMgPSBOb25lCgogICAgY29udGV4dC5sb2dfcmVzdWx0KCJ0ZXN0X2FjY3VyYWN5IiwgZmxvYXQobW9kZWwuc2NvcmUoZGF0YVsneHRlc3QnXSwgZGF0YVsneXRlc3QnXSkpKQoKICAgIGxvc3MgPSBucC5hc2FycmF5KG1vZGVsLmV2YWxzX3Jlc3VsdF9bJ3RyYWluJ11bJ2JpbmFyeV9sb2dsb3NzJ10sIGR0eXBlPW5wLmZsb2F0KQogICAgdmFsX2xvc3MgPSBucC5hc2FycmF5KG1vZGVsLmV2YWxzX3Jlc3VsdF9bJ3ZhbGlkJ11bJ2JpbmFyeV9sb2dsb3NzJ10sIGR0eXBlPW5wLmZsb2F0KQogICAgX3Bsb3RfdmFsaWRhdGlvbihsb3NzLCB2YWxfbG9zcykKCiAgICBfcGxvdF9yb2MoZGF0YVsneXRlc3QnXSwgeXByZWRfcHJvYnMpCiAgICAKICAgIF9wbG90X2NvbmZ1c2lvbl9tYXRyaXgoZGF0YVsneXRlc3QnXSwgeXByZWQpCiAgICAKICAgIGlmIGhhc2F0dHIobW9kZWwsICdmZWF0dXJlX2ltcG9ydGFuY2VzXycpOgogICAgICAgIF9wbG90X2ltcG9ydGFuY2UobW9kZWwsIGhlYWRlcikKICAgCiAgICBmaWxlcGF0aCA9IG9zLnBhdGguam9pbih0YXJnZXRfcGF0aCwgbmFtZSkKICAgIGR1bXAobW9kZWwsIG9wZW4oZmlsZXBhdGgsICd3YicpKQogICAgY29udGV4dC5sb2dfYXJ0aWZhY3Qoa2V5LAogICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0X3BhdGg9ZmlsZXBhdGgpCgpkZWYgdHJhaW4oCiAgICBjb250ZXh0OiBNTENsaWVudEN0eCwKICAgIHNyY19maWxlOiBzdHIsCiAgICBoZWFkZXIsCiAgICBTS0NsYXNzaWZpZXIsCiAgICBtb2RlbF9sb2dnZXIsIAogICAgdGVzdF9zaXplOiBmbG9hdCA9IDAuMSwKICAgIHRyYWluX3ZhbF9zcGxpdDogZmxvYXQgPSAwLjc1LAogICAgc2FtcGxlOiBpbnQgPSAtMSwKICAgIHRhcmdldF9wYXRoOiBzdHIgPSAnJywKICAgIG5hbWU6IHN0ciA9ICcnLAogICAga2V5OiBzdHIgPSAnJywKICAgIHZlcmJvc2U6IGJvb2wgPSBGYWxzZSwKICAgIHJhbmRvbV9zdGF0ZSA9IDEKKSAtPiBOb25lOgogICAgIiIiVHJhaW4gYW5kIHNhdmUgYSBMaWdodEdCTSBtb2RlbC4KICAgIAogICAgOnBhcmFtIGNvbnRleHQ6ICAgICAgICAgdGhlIGZ1bmN0aW9uIGNvbnRleHQKICAgIDpwYXJhbSBzcmNfZmlsZTogICAgICAgICgncmF3JykgbmFtZSBvZiByYXcgZGF0YSBmaWxlCiAgICA6cGFyYW0gaGVhZGVyOiAgICAgICAgICBoZWFkZXIgYXJ0aWZhY3QKICAgIDpwYXJhbSB0ZXN0X3NpemU6ICAgICAgICgwLjEpIHRlc3Qgc2V0IHNpemUKICAgIDpwYXJhbSB0cmFpbl92YWxfc3BsaXQ6ICgwLjc1KSBPbmNlIHRoZSB0ZXN0IHNldCBoYXMgYmVlbiByZW1vdmVkIHRoZSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWluaW5nIHNldCBnZXRzIHRoaXMgcHJvcG9ydGlvbi4KICAgIDpwYXJhbSBzYW1wbGU6ICAgICAgICAgICgtMSkuIFNlbGVjdHMgdGhlIGZpcnN0IG4gcm93cywgb3Igc2VsZWN0IGEgc2FtcGxlIHN0YXJ0aW5nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tIHRoZSBmaXJzdC4gSWYgbmVnYXRpdmUgPC0xLCBzZWxlY3QgYSByYW5kb20gc2FtcGxlIGZyb20gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgZW50aXJlIGZpbGUKICAgIDpwYXJhbSB0YXJnZXRfcGF0aDogICAgIGZvbGRlciBsb2NhdGlvbiBvZiBmaWxlcwogICAgOnBhcmFtIG5hbWU6ICAgICAgICAgICAgZGVzdGluYXRpb24gbmFtZSBmb3IgbW9kZWwgZmlsZQogICAgOnBhcmFtIGtleTogICAgICAgICAgICAga2V5IGZvciBtb2RlbCBhcnRpZmFjdAogICAgOnBhcmFtIHZlcmJvc2UgOiAgICAgICAgKEZhbHNlKSBzaG93IG1ldHJpY3MgZm9yIHRyYWluaW5nL3ZhbGlkYXRpb24gc3RlcHMuCiAgICA6cGFyYW0gcmFuZG9tX3N0YXRlOiAgICAoMSkgc2tsZWFybiBybmcgc2VlZAogICAgOnBhcmFtIHNrbGVhcm5fcGFyYW1zICAgc2tsZWFybiBrZXl3b3JkIHBhcmFtcyAKICAgICIiIgogICAgc3JjZmlsZXBhdGggPSBvcy5wYXRoLmpvaW4odGFyZ2V0X3BhdGgsIHNyY19maWxlKQogICAgcHJpbnQoc3JjZmlsZXBhdGgpCiAgICBpZiAoc2FtcGxlID09IC0xKSBvciAoc2FtcGxlID49IDEpOgogICAgICAgIHJhdyA9IHBkLnJlYWRfcGFycXVldChzcmNmaWxlcGF0aCwgZW5naW5lPSdweWFycm93JykKICAgICAgICBsYWJlbHMgPSByYXcucG9wKCdsYWJlbHMnKQogICAgICAgIHJhdyA9IHJhdy5pbG9jWzpzYW1wbGUsIDpdCiAgICAgICAgbGFiZWxzID0gbGFiZWxzLmlsb2NbOnNhbXBsZV0KICAgIGVsc2U6CiAgICAgICAgcmF3ID0gcGQucmVhZF9wYXJxdWV0KHNyY2ZpbGVwYXRoLCBlbmdpbmU9J3B5YXJyb3cnKS5zYW1wbGUoc2FtcGxlKi0xKQogICAgICAgIGxhYmVscyA9IHJhdy5wb3AoJ2xhYmVscycpCgogICAgeCwgeHRlc3QsIHksIHl0ZXN0ID0gdHJhaW5fdGVzdF9zcGxpdChyYXcsIGxhYmVscywgdHJhaW5fc2l6ZT0xLXRlc3Rfc2l6ZSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmRvbV9zdGF0ZT1yYW5kb21fc3RhdGUpCiAgIAogICAgeHRyYWluLCB4dmFsaWQsIHl0cmFpbiwgeXZhbGlkID0gdHJhaW5fdGVzdF9zcGxpdCh4LCB5LCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhaW5fc2l6ZT10cmFpbl92YWxfc3BsaXQsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5kb21fc3RhdGU9cmFuZG9tX3N0YXRlKSAgICAgICAgCiAgIAogICAgc3BsaXRzID0gU0tDbGFzc2lmaWVyLnNwbGl0KCIuIikKICAgIGNsZmNsYXNzID0gZ2V0YXR0cigKICAgICAgICBpbXBvcnRsaWIuaW1wb3J0X21vZHVsZSgiLiIuam9pbihzcGxpdHNbOi0xXSkpLAogICAgICAgIHNwbGl0c1stMV0pCgogICAgY2xmID0gY2xmY2xhc3MocmFuZG9tX3N0YXRlPXJhbmRvbV9zdGF0ZSwKICAgICAgICAgICAgICAgICAgIHZlcmJvc2U9aW50KHZlcmJvc2UgPT0gVHJ1ZSkpCgogICAgZXZhbF9yZXN1bHRzID0gZGljdCgpCgogICAgY2xmLmZpdCh4dHJhaW4sIAogICAgICAgICAgICB5dHJhaW4sCiAgICAgICAgICAgIGV2YWxfc2V0PVsoeHZhbGlkLCB5dmFsaWQpLCAoeHRyYWluLCB5dHJhaW4pXSwKICAgICAgICAgICAgZXZhbF9uYW1lcz1bJ3ZhbGlkJywgJ3RyYWluJ10sCiAgICAgICAgICAgIGNhbGxiYWNrcz1bbGdiLnJlY29yZF9ldmFsdWF0aW9uKGV2YWxfcmVzdWx0cyldLAogICAgICAgICAgICB2ZXJib3NlPXZlcmJvc2UpCiAgICAgCiAgICBjb250ZXh0LmxvZ19yZXN1bHQoInRyYWluX2FjY3VyYWN5IiwgZmxvYXQoY2xmLnNjb3JlKHh0cmFpbiwgeXRyYWluKSkpCiAgICAKICAgIF9oZWFkZXIgPSBsb2FkKG9wZW4oaGVhZGVyLCAncmInKSkKICAgIAogICAgbG9nZ2VyID0gbG9hZChvcGVuKG1vZGVsX2xvZ2dlciwgJ3JiJykpCiAgICBsb2dnZXIoCiAgICAgICAgY29udGV4dCwgCiAgICAgICAgY2xmLCAKICAgICAgICBkYXRhPXsneHRlc3QnOiB4dGVzdCwgJ3l0ZXN0Jzp5dGVzdH0sCiAgICAgICAgdGFyZ2V0X3BhdGg9dGFyZ2V0X3BhdGgsCiAgICAgICAgaGVhZGVyPV9oZWFkZXIsCiAgICAgICAgbmFtZT1uYW1lLCAKICAgICAgICBrZXk9a2V5KQoK
    base_image: yjbds/mlrun-ds:latest
    commands: []
    code_origin: https://github.com/yjb-ds/demos.git#0313ab2d8e7278c37a0c6f96e2a05f746a8f1331:classifier_job.ipynb
